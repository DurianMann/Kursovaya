<Window x:Class="Kursovaya.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Кинотеатр" Height="1080" Width="1920"
        Style="{DynamicResource WindowStyle}" Closing="Window_Closing"
        WindowStartupLocation="CenterScreen">
    <Grid>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Шапка (логин/баланс) -->
            <RowDefinition Height="*"/>
            <!-- Основной контент (список фильмов) -->
            <RowDefinition Height="Auto"/>
            <!-- Кнопка "Выбрать места" -->
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="5">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="0,0,20,0">
                <TextBlock Text="Логин:" Margin="5" Style="{DynamicResource LoginStyle}" HorizontalAlignment="Left"/>
                <TextBlock x:Name="LoginLabel" Margin="5" Style="{DynamicResource LoginStyle}" HorizontalAlignment="Left"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" Margin="5">
                <TextBlock Text="Баланс:" Style="{DynamicResource LoginStyle}" Margin="0,0,5,0"/>
                <Label x:Name="BalanceLabel" FontSize="28" Margin="0,10,0,10"/>
                <Button Content="+" Click="TopUp_Click" Style="{DynamicResource BaseButtonStyle}" 
                    Width="20" Height="20" Padding="0" VerticalContentAlignment="Top" Margin="10,0,0,0"/>
            </StackPanel>

            <Button Grid.Column="2" Height="30" Padding="2" VerticalAlignment="Center" Content="Выйти из профиля" Click="LogOut_Click" Style="{DynamicResource BaseButtonStyle}"/>
        </Grid>
        <StackPanel Grid.Row="1" Height="auto" Width="auto" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
            <Button Click="CheckSeats_Click" Style="{DynamicResource BaseButtonStyle}" Content="Билеты" HorizontalAlignment="Right" Margin="10" Height="30" Padding="2"/>
            <TextBlock Text="Выберите фильм" FontSize="20" Style="{DynamicResource TextBlockStyle}" />
            <ListBox x:Name="FilmList"
         SelectionChanged="FilmList_SelectionChanged"
         Margin="10"
         VerticalAlignment="Stretch"
         HorizontalAlignment="Stretch"
         HorizontalContentAlignment="Stretch"
         MaxHeight="760"
                     MouseDoubleClick="FilmList_MouseDoubleClick">
                <ListBox.Resources>
                    <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource CustomScrollBar}"/>
                </ListBox.Resources>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <Image Source="{Binding MoviePreview}" MaxHeight="200" Stretch="Uniform"/>
                            <TextBlock Text="{Binding Title}" Style="{DynamicResource BigCaseStyle}"/>
                            <TextBlock Text="{Binding TimePreview}" Style="{DynamicResource TextBlockStyle}"/>
                            <TextBlock Text="Цена:" Margin="10 10 0 10" Style="{DynamicResource TextBlockStyle}"/>
                            <TextBlock Text="{Binding Price}" Margin="0 10 0 10" Style="{DynamicResource TextBlockStyle}"/>
                            <TextBlock Text="р." Margin="0 10 10 10" Style="{DynamicResource TextBlockStyle}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
        <Button Grid.Row="2" Content="Выбрать места" 
        Style="{DynamicResource BaseButtonStyle}"
        Margin="10" MinHeight="30"
        Click="SelectSeats_Click"
        HorizontalAlignment="Stretch"/>
    </Grid>
</Window>